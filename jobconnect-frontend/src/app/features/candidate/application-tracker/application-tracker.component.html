<div class="tracker-container">
    <!-- Hero Header -->
    <div class="tracker-header">
        <div class="header-orb header-orb-1"></div>
        <div class="header-orb header-orb-2"></div>

        <div class="header-badge">
            <span class="badge-dot"></span>
            <span>Real-time status updates</span>
        </div>

        <h1>Track Your <span class="gradient-text">Applications</span></h1>
        <p class="subtitle">Monitor the progress of your job applications in real-time</p>

        @if (!loading() && applications().length > 0) {
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-number">{{ applications().length }}</span>
                <span class="stat-label">Total</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-number active">{{ getActiveCount() }}</span>
                <span class="stat-label">Active</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
                <span class="stat-number interviews">{{ getInterviewCount() }}</span>
                <span class="stat-label">Interviews</span>
            </div>
        </div>
        }
    </div>

    @if (loading()) {
    <div class="loading-state">
        <div class="spinner"></div>
        <p>Loading your applications...</p>
    </div>
    } @else if (applications().length === 0) {
    <div class="empty-state">
        <div class="empty-icon">üìã</div>
        <h3>No Applications Yet</h3>
        <p>Start applying to jobs to see your applications here</p>
        <a href="/jobs" class="btn-primary">Browse Jobs</a>
    </div>
    } @else {
    <div class="applications-list">
        @for (app of applications(); track app.id; let i = $index) {
        <div class="application-card" [class.rejected]="isRejected(app.status)"
            [style.animation-delay]="(i * 0.08) + 's'">
            <div class="card-header">
                <div class="job-info">
                    <h3>{{ app.jobTitle }}</h3>
                    <span class="applied-date">Applied {{ app.appliedAt | date:'mediumDate' }}</span>
                </div>
                <div class="matching-score" [ngClass]="getScoreClass(app.matchingScore)">
                    <span class="score-label">Match</span>
                    <span class="score-value">{{ app.matchingScore }}%</span>
                </div>
            </div>

            @if (isRejected(app.status)) {
            <div class="rejected-banner">
                <span class="rejected-icon">‚ùå</span>
                <span>Application not selected</span>
            </div>
            } @else {
            <div class="status-pipeline">
                @for (step of statusSteps; track step.status; let i = $index) {
                <div class="pipeline-step" [class.complete]="isStepComplete(app.status, step.status)"
                    [class.current]="isStepCurrent(app.status, step.status)">
                    <div class="step-indicator">
                        @if (isStepComplete(app.status, step.status)) {
                        <span class="step-check">‚úì</span>
                        } @else {
                        <span class="step-number">{{ i + 1 }}</span>
                        }
                    </div>
                    <span class="step-label">{{ step.label }}</span>
                </div>
                @if (i < statusSteps.length - 1) { <div class="step-connector"
                    [class.complete]="isStepComplete(app.status, statusSteps[i + 1].status)">
            </div>
            }
            }
        </div>
        }

        <div class="card-footer">
            <span class="current-status">
                {{ isRejected(app.status) ? 'Closed' : 'Status: ' + app.status }}
            </span>
<<<<<<< HEAD
            @if (app.status === 'Interview') {
            @if (app.interviewId) {
            <a class="btn-interview-action" routerLink="/interviews">
                üìπ Voir l'entretien
            </a>
            } @else {
            <a class="btn-interview-action" [routerLink]="['/candidate/book-interview', app.id]"
                [queryParams]="{companyId: app.companyId}">
                üìÖ Choisir un cr√©neau
            </a>
            }
            }
=======
>>>>>>> upstream/main
            <span class="last-update">Updated {{ app.updatedAt | date:'short' }}</span>
        </div>
    </div>
    }
</div>
<<<<<<< HEAD
=======

<div class="pagination-info">
    Showing {{ applications().length }} of {{ totalCount() }} applications
</div>

@if (hasMore()) {
<div class="load-more-container">
    <button class="load-more-btn" (click)="loadMore()" [disabled]="loadingMore()">
        @if (loadingMore()) {
        <span class="btn-spinner"></span>
        Loading...
        } @else {
        Load More Applications
        }
    </button>
</div>
}
>>>>>>> upstream/main
}
</div>